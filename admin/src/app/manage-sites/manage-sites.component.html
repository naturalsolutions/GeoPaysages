<ngx-spinner size="medium" type="ball-spin">
  <p style="color: white"> Loading... </p>
</ngx-spinner>
<app-header></app-header>
<div class="container-fluid">
  <div class="row">
    <div class="col-12 col-table">
      <div>
        <button class=" blue-btn btn-add" (click)="onAddSite()">  {{ 'ACTIONS.ADD' | translate: {article:('ARTICLES.UN' | translate), varname: ('SITE_MNGMT.OBSERVATION_POINT' | translate) }  }}</button>
        <ngx-datatable *ngIf="sitesLoaded" class="material" [rows]="rows" [headerHeight]="40" [footerHeight]="40"
          [limit]="7" [rowHeight]="'auto'" [scrollbarH]="true" [reorderable]="reorderable" [selectionType]="'single'"
          (select)='onSelect($event)'>
          <ngx-datatable-column name="{{ 'COMMONS.PICTURE' | translate }}">
            <ng-template let-row="row" ngx-datatable-cell-template>
              <img class="main-photo" src="{{row.main_photo}}" alt="">
            </ng-template>
          </ngx-datatable-column>
          <ngx-datatable-column prop="ref_site" name="{{'COMMONS.REFERENCE' | translate }}" width="100">
            <ng-template let-row="row" ngx-datatable-cell-template>
              {{row.ref_site}}
            </ng-template>
          </ngx-datatable-column>
          <ngx-datatable-column prop="observatory_title" name="{{ 'SITE_MNGMT.OBSERVATORY' | translate }}">
            <ng-template let-row="row" ngx-datatable-cell-template>
              {{row.observatory_title}}
            </ng-template>
          </ngx-datatable-column>
          <ngx-datatable-column prop="name_site" name="{{ 'FIELDS.NAME' | translate: {article:('ARTICLES.DU' | translate), varname: ('SITE_MNGMT.OBSERVATION_POINT' | translate) }  }}" width="320">
            <ng-template let-row="row" ngx-datatable-cell-template>
              {{row.name_site}}
            </ng-template>
          </ngx-datatable-column>
          <ngx-datatable-column prop="code_city_site" name="{{ 'SITE_MNGMT.CITY' | translate }}">
            <ng-template let-row="row" ngx-datatable-cell-template>
              {{row.code_city_site}}
            </ng-template>
          </ngx-datatable-column>
          <ngx-datatable-column prop="publish_site" name="{{ 'COMMONS.IS_PUBLISHED' | translate}}">
            <ng-template let-row="row" ngx-datatable-cell-template>
              <div *ngIf="row.publish_site; else elseBlock"><span class="icon-checkmark text-success"></span></div>
              <ng-template #elseBlock><span class="icon-cross text-danger"></span></ng-template>
            </ng-template>
          </ngx-datatable-column>
        </ngx-datatable>
      </div>
    </div>
  </div>
</div>